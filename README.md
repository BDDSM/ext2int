# ext2int
Перенос обработок и отчетов из справочника ВнешниеОбработки в конфигурацию

**Код использовался на реальном проекте для импорта в хранилище ~500 внешних обработок, 98% которых созданы копи-пастом друг из друга**

## Features
Для всех выгружаемых обработок и отчетов:
 - создается новое уникальное имя с человеческим названием (из наименование элемента справочника)
 - создаются новые идентификаторы типов, форм, макетов
 - в управляемых формах старые имена типов заменяются на новые
 - в *обычных* формах старые идентификаторы типов заменяются на новые

Полностью решена проблема того, что отчеты и обработки создавались копи-пастом и имеют идентичные имена и идентификаторы типов. После загрузки они будут реально различными.

## Подготовка
Возможно, Вам это не нужно. На проекте, для которого это писалось, в регистре сведений "Сохраненные настройки" хранились в том числе настроки по внешним отчетам. Если у Вас не так, то нужно будет в коде комментнуть участок по этой части.

1. В справочник ВнешниеОбработки добавить реквизит ИмяВнутреннейОбработки (Строка, ~80) (см. Особенности)
2. В справочник ВнешниеОбработки в ТЧ Принадлежность добавить реквизит ИмяВнутреннейОбработки (Строка, ~80) (см. Особенности)

## Инструкция
1. Выгрузить конфигурацию в файлы в иерархическом формате в $SRC_DIR$
2. Выполнить код export.bsl, отчет сохранить в $patch.xml$
3. Выполнить код convert.bat
4. Выполнить код rebuild.bsl
5. Содержимое полученных каталогов DataProcessors и Reports скопировать в соответствующие каталоги $SRC_DIR$
6. Содержимое $patch.xml$ поместить в $SRC_DIR$\Configuration.xml
7. Загрузить конфигурацию из $SRC_DIR$

### Инструкция не содержит ничего про:
 - изменению путей в коде файлов
 - изменение форм элемента/списка справочника ВнешниеОбработки
 - модификацию кода загрузки обработки не из внешнего файла, а из конфигурации
 - очистку сохраненных обработок в справочнике

 
## Особенности
 - если файл печатной формы не подключен, то внешняя обработка по такому файлу не выгружается
 
Код писался на 8.3.9.1818 в обычном приложении в режиме совместимости 8.2.16

---
[Сказать "Спасибо" через PayPal :-)]( 
https://www.paypal.com/cgi-bin/webscr?cmd=_donations&business=A53Q5RTCP7EKU&lc=RU&item_name=Dmitry%20Klimenko&item_number=int2ext&currency_code=RUB&bn=PP%2dDonationsBF%3abtn_donateCC_LG%2egif%3aNonHosted)
